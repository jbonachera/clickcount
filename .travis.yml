sudo: required
services:
  - docker

language: java
before_install:
  - docker build -t jbonachera/clickcount:$TRAVIS_COMMIT .
after_success:
  - docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"
  - docker push jbonachera/clickcount:$TRAVIS_COMMIT
  - if [ "$TRAVIS_BRANCH" == "develop" ]; then
    docker tag jbonachera/clickcount:$TRAVIS_COMMIT jbonachera/clickcount:dev
    docker push jbonachera/clickcount:dev
    fi
  - if [ "$TRAVIS_BRANCH" == "master" ]; then
    docker push jbonachera/clickcount
    fi
